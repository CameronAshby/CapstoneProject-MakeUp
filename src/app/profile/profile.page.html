<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Profile</ion-title>
      <ion-buttons (click)="viewCart()" class="cartIconContainer" slot="end">
          <ion-icon name="cart"></ion-icon>
      </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content padding>
    <div>
        <div class="customerName"><div class="nameItem">Valued Customer</div> <div class="flairContainer"><img class="flair" src="../../assets/newflair.png" alt=""></div> <div class="nameItem">{{ loginService.currentUser ? loginService.currentUser.name : ''}}</div> </div>
        <div class="orderContainer">
            <ion-card class="purchaseContainer" *ngFor="let purchase of loginService.currentUser ? loginService.currentUser.purchaseHistory : [], let i = index">
                <div class="orderDetailContainer">
                    <div class="orderNumber">
                        <div class="order">Order #{{i + 1}}</div>
                    </div>
                    <div class="total">Total ${{purchase.total | number: '1.2-2'}}</div>
                    <div class="flairContainer">
                        <img class="smallFlair" src="../../assets/newflair.png" alt="">
                    </div>
                </div>
                    <div class="purchase">
                        <div class="similarContainer" *ngFor="let item of purchase ? purchase.order : []" >
                            <div class="similarCard">
                                <img onerror="this.src='../../../assets/logoImages/camlogo.png'" [src]="item.product.image_link" alt="API Image Not Available" class="productImage">
                                <div class="extraDetailsContainer">
                                    <div class="name">{{item.product.name}}</div>
                                    <div>
                                        <div class="quantity">Quantity: {{item.quantity}}</div>
                                        <div class="total">Product total ${{(item.product.price === '0.0' || item.product.price === null) ? (item.quantity * 5) + '.00' : ((item.product.price * item.quantity) | number: '1.2-2')}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </ion-card>
        </div>
    </div>

</ion-content>
